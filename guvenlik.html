<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Güvenlik Ayarları - Verde</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <div id="header-placeholder"></div>

    <main class="settings-page">
        <div class="container">
            <div class="page-header">
                <div class="breadcrumb">
                    <a href="ayarlar.html"><i class="fas fa-cog"></i> Ayarlar</a>
                    <i class="fas fa-chevron-right"></i>
                    <span>Güvenlik</span>
                </div>
                <h1><i class="fas fa-shield-alt"></i> Güvenlik Ayarları</h1>
                <p class="header-subtitle">Hesabınızın güvenlik ayarlarını yönetin</p>
            </div>

            <div class="settings-container">
                <div class="settings-sidebar">
                    <nav class="settings-nav">
                        <a href="hesap-bilgileri.html" class="nav-item">
                            <i class="fas fa-user"></i>
                            <span>Hesap Bilgileri</span>
                        </a>
                        <a href="guvenlik.html" class="nav-item active">
                            <i class="fas fa-shield-alt"></i>
                            <span>Güvenlik</span>
                        </a>
                        <a href="gizlilik.html" class="nav-item">
                            <i class="fas fa-lock"></i>
                            <span>Gizlilik</span>
                        </a>
                        <a href="bildirimler.html" class="nav-item">
                            <i class="fas fa-bell"></i>
                            <span>Bildirimler</span>
                        </a>
                        <a href="gorunum.html" class="nav-item">
                            <i class="fas fa-palette"></i>
                            <span>Görünüm</span>
                        </a>
                        <a href="premium.html" class="nav-item">
                            <i class="fas fa-crown"></i>
                            <span>Premium</span>
                        </a>
                        <a href="veri-yonetimi.html" class="nav-item">
                            <i class="fas fa-download"></i>
                            <span>Veri Yönetimi</span>
                        </a>
                    </nav>
                </div>

                <div class="settings-content">
                    <div class="settings-section active">
                        <!-- Şifre Değiştirme -->
                        <div class="settings-card">
                            <div class="card-header">
                                <h3>Şifre Değiştirme</h3>
                                <div class="security-status">
                                    <span class="status-indicator good"></span>
                                    <span>Güçlü Şifre</span>
                                </div>
                            </div>
                            <form class="settings-form" id="passwordForm">
                                <div class="form-group">
                                    <label for="currentPassword">Mevcut Şifre</label>
                                    <div class="password-input">
                                        <input type="password" id="currentPassword" name="currentPassword" placeholder="Mevcut şifrenizi giriniz">
                                        <button type="button" class="toggle-password" onclick="togglePasswordVisibility('currentPassword')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="newPassword">Yeni Şifre</label>
                                    <div class="password-input">
                                        <input type="password" id="newPassword" name="newPassword" placeholder="Yeni şifrenizi giriniz">
                                        <button type="button" class="toggle-password" onclick="togglePasswordVisibility('newPassword')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <div class="password-strength" id="passwordStrength">
                                        <div class="strength-bar">
                                            <div class="strength-fill"></div>
                                        </div>
                                        <span class="strength-text">Şifre gücü</span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="confirmPassword">Yeni Şifre Tekrar</label>
                                    <div class="password-input">
                                        <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Yeni şifrenizi tekrar giriniz">
                                        <button type="button" class="toggle-password" onclick="togglePasswordVisibility('confirmPassword')">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                </div>

                                <div class="password-requirements">
                                    <h4>Şifre Gereksinimleri:</h4>
                                    <ul>
                                        <li id="req-length">En az 8 karakter</li>
                                        <li id="req-uppercase">En az 1 büyük harf</li>
                                        <li id="req-lowercase">En az 1 küçük harf</li>
                                        <li id="req-number">En az 1 rakam</li>
                                        <li id="req-special">En az 1 özel karakter</li>
                                    </ul>
                                </div>

                                <div class="form-actions">
                                    <button type="submit" class="btn-primary">
                                        <i class="fas fa-save"></i>
                                        Şifreyi Güncelle
                                    </button>
                                </div>
                            </form>
                        </div>

                        <!-- İki Faktörlü Doğrulama -->
                        <div class="settings-card">
                            <div class="card-header">
                                <h3>İki Faktörlü Doğrulama (2FA)</h3>
                                <div class="toggle-switch">
                                    <input type="checkbox" id="twoFactorToggle" class="toggle-input">
                                    <label for="twoFactorToggle" class="toggle-label"></label>
                                </div>
                            </div>
                            <p>Hesabınızı daha güvenli hale getirmek için iki faktörlü doğrulamayı etkinleştirin.</p>
                            
                            <div class="two-factor-methods" id="twoFactorMethods" style="display: none;">
                                <h4>Doğrulama Yöntemi Seçin:</h4>
                                <div class="method-options">
                                    <label class="method-option">
                                        <input type="radio" name="twoFactorMethod" value="sms">
                                        <div class="method-card">
                                            <i class="fas fa-sms"></i>
                                            <h5>SMS</h5>
                                            <p>Telefon numaranıza kod gönder</p>
                                        </div>
                                    </label>
                                    <label class="method-option">
                                        <input type="radio" name="twoFactorMethod" value="email">
                                        <div class="method-card">
                                            <i class="fas fa-envelope"></i>
                                            <h5>E-posta</h5>
                                            <p>E-posta adresinize kod gönder</p>
                                        </div>
                                    </label>
                                    <label class="method-option">
                                        <input type="radio" name="twoFactorMethod" value="app">
                                        <div class="method-card">
                                            <i class="fas fa-mobile-alt"></i>
                                            <h5>Kimlik Doğrulayıcı</h5>
                                            <p>Google Authenticator gibi uygulamalar</p>
                                        </div>
                                    </label>
                                </div>
                                <button class="btn-primary" onclick="setupTwoFactor()">
                                    <i class="fas fa-shield-alt"></i>
                                    2FA'yı Etkinleştir
                                </button>
                            </div>
                        </div>

                        <!-- Oturum Yönetimi -->
                        <div class="settings-card">
                            <h3>Aktif Oturumlar</h3>
                            <p>Hesabınızla açık olan tüm oturumları görüntüleyin ve yönetin.</p>
                            
                            <div class="sessions-list">
                                <div class="session-item current">
                                    <div class="session-info">
                                        <div class="device-icon">
                                            <i class="fas fa-desktop"></i>
                                        </div>
                                        <div class="session-details">
                                            <h4>Bu Cihaz (Mevcut Oturum)</h4>
                                            <p>Windows • Chrome • İstanbul, Türkiye</p>
                                            <span class="last-activity">Şu an aktif</span>
                                        </div>
                                    </div>
                                    <span class="current-badge">Mevcut</span>
                                </div>

                                <div class="session-item">
                                    <div class="session-info">
                                        <div class="device-icon">
                                            <i class="fas fa-mobile-alt"></i>
                                        </div>
                                        <div class="session-details">
                                            <h4>iPhone</h4>
                                            <p>iOS • Safari • Ankara, Türkiye</p>
                                            <span class="last-activity">2 saat önce</span>
                                        </div>
                                    </div>
                                    <button class="btn-secondary-sm" onclick="terminateSession('mobile-1')">
                                        Sonlandır
                                    </button>
                                </div>

                                <div class="session-item">
                                    <div class="session-info">
                                        <div class="device-icon">
                                            <i class="fas fa-laptop"></i>
                                        </div>
                                        <div class="session-details">
                                            <h4>MacBook Pro</h4>
                                            <p>macOS • Safari • İzmir, Türkiye</p>
                                            <span class="last-activity">1 gün önce</span>
                                        </div>
                                    </div>
                                    <button class="btn-secondary-sm" onclick="terminateSession('laptop-1')">
                                        Sonlandır
                                    </button>
                                </div>
                            </div>

                            <div class="session-actions">
                                <button class="btn-danger" onclick="terminateAllSessions()">
                                    <i class="fas fa-sign-out-alt"></i>
                                    Diğer Tüm Oturumları Sonlandır
                                </button>
                            </div>
                        </div>

                        <!-- Güvenlik Geçmişi -->
                        <div class="settings-card">
                            <h3>Güvenlik Geçmişi</h3>
                            <p>Hesabınızdaki son güvenlik etkinliklerini görüntüleyin.</p>
                            
                            <div class="security-log">
                                <div class="log-item">
                                    <div class="log-icon success">
                                        <i class="fas fa-sign-in-alt"></i>
                                    </div>
                                    <div class="log-details">
                                        <h4>Başarılı Giriş</h4>
                                        <p>Windows • Chrome • İstanbul, Türkiye</p>
                                        <span class="log-time">Bugün 14:30</span>
                                    </div>
                                </div>

                                <div class="log-item">
                                    <div class="log-icon warning">
                                        <i class="fas fa-exclamation-triangle"></i>
                                    </div>
                                    <div class="log-details">
                                        <h4>Başarısız Giriş Denemesi</h4>
                                        <p>Bilinmeyen Cihaz • İstanbul, Türkiye</p>
                                        <span class="log-time">Dün 22:15</span>
                                    </div>
                                </div>

                                <div class="log-item">
                                    <div class="log-icon info">
                                        <i class="fas fa-key"></i>
                                    </div>
                                    <div class="log-details">
                                        <h4>Şifre Değiştirildi</h4>
                                        <p>Windows • Chrome • İstanbul, Türkiye</p>
                                        <span class="log-time">3 gün önce</span>
                                    </div>
                                </div>
                            </div>

                            <button class="btn-secondary" onclick="downloadSecurityLog()">
                                <i class="fas fa-download"></i>
                                Tam Güvenlik Raporunu İndir
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <script src="auth.js"></script>
    <script src="ui.js"></script>
    <script src="listings.js"></script>

    <script src="layout.js"></script> 

    <script src="script.js"></script>

    <script>
        // Password visibility toggle
        function togglePasswordVisibility(inputId) {
            const input = document.getElementById(inputId);
            const button = input.nextElementSibling;
            const icon = button.querySelector('i');
            
            if (input.type === 'password') {
                input.type = 'text';
                icon.className = 'fas fa-eye-slash';
            } else {
                input.type = 'password';
                icon.className = 'fas fa-eye';
            }
        }

        // Password strength checker
        document.getElementById('newPassword').addEventListener('input', function() {
            const password = this.value;
            const strength = calculatePasswordStrength(password);
            updatePasswordStrength(strength);
            checkPasswordRequirements(password);
        });

        function calculatePasswordStrength(password) {
            let score = 0;
            if (password.length >= 8) score++;
            if (/[a-z]/.test(password)) score++;
            if (/[A-Z]/.test(password)) score++;
            if (/\d/.test(password)) score++;
            if (/[^a-zA-Z\d]/.test(password)) score++;
            return score;
        }

        function updatePasswordStrength(score) {
            const strengthBar = document.querySelector('.strength-fill');
            const strengthText = document.querySelector('.strength-text');
            
            const levels = ['Çok Zayıf', 'Zayıf', 'Orta', 'İyi', 'Güçlü'];
            const colors = ['#ff4444', '#ff8800', '#ffaa00', '#88cc00', '#44cc44'];
            const widths = ['20%', '40%', '60%', '80%', '100%'];
            
            strengthBar.style.width = widths[score - 1] || '0%';
            strengthBar.style.backgroundColor = colors[score - 1] || '#ddd';
            strengthText.textContent = levels[score - 1] || 'Şifre gücü';
        }

        function checkPasswordRequirements(password) {
            const requirements = [
                { id: 'req-length', test: password.length >= 8 },
                { id: 'req-uppercase', test: /[A-Z]/.test(password) },
                { id: 'req-lowercase', test: /[a-z]/.test(password) },
                { id: 'req-number', test: /\d/.test(password) },
                { id: 'req-special', test: /[^a-zA-Z\d]/.test(password) }
            ];
            
            requirements.forEach(req => {
                const element = document.getElementById(req.id);
                element.className = req.test ? 'valid' : '';
            });
        }

        // Two-factor authentication
        document.getElementById('twoFactorToggle').addEventListener('change', function() {
            const methods = document.getElementById('twoFactorMethods');
            methods.style.display = this.checked ? 'block' : 'none';
        });

        function setupTwoFactor() {
            const selectedMethod = document.querySelector('input[name="twoFactorMethod"]:checked');
            if (!selectedMethod) {
                showNotification('Lütfen bir doğrulama yöntemi seçin.', 'warning');
                return;
            }
            
            showNotification(`${selectedMethod.value.toUpperCase()} ile 2FA kurulumu başlatılıyor...`, 'info');
            
            // Simulated setup process
            setTimeout(() => {
                showNotification('İki faktörlü doğrulama başarıyla etkinleştirildi!', 'success');
            }, 2000);
        }

        // Session management
        function terminateSession(sessionId) {
            if (confirm('Bu oturumu sonlandırmak istediğinizden emin misiniz?')) {
                showNotification('Oturum başarıyla sonlandırıldı.', 'success');
                // Remove session from UI
                const sessionElement = event.target.closest('.session-item');
                sessionElement.remove();
            }
        }

        function terminateAllSessions() {
            if (confirm('Diğer tüm oturumları sonlandırmak istediğinizden emin misiniz? Bu işlem geri alınamaz.')) {
                showNotification('Tüm diğer oturumlar sonlandırıldı.', 'success');
                // Remove all non-current sessions
                document.querySelectorAll('.session-item:not(.current)').forEach(session => {
                    session.remove();
                });
            }
        }

        function downloadSecurityLog() {
            showNotification('Güvenlik raporu indiriliyor...', 'info');
            // Simulate download
            setTimeout(() => {
                showNotification('Güvenlik raporu başarıyla indirildi.', 'success');
            }, 1500);
        }

        // Form submission
        document.getElementById('passwordForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const currentPassword = document.getElementById('currentPassword').value;
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (!currentPassword || !newPassword || !confirmPassword) {
                showNotification('Lütfen tüm alanları doldurun.', 'warning');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showNotification('Yeni şifreler uyuşmuyor.', 'error');
                return;
            }
            
            if (calculatePasswordStrength(newPassword) < 3) {
                showNotification('Lütfen daha güçlü bir şifre seçin.', 'warning');
                return;
            }
            
            const submitBtn = this.querySelector('.btn-primary');
            const originalText = submitBtn.innerHTML;
            
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Güncelleniyor...';
            submitBtn.disabled = true;
            
            setTimeout(() => {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
                this.reset();
                showNotification('Şifreniz başarıyla güncellendi!', 'success');
            }, 2000);
        });
    </script>
</body>
</html>